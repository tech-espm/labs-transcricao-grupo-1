<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transcrição — Upload e Gravação</title>

  <style>
    /* reset */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Inter", Arial, sans-serif;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      transition: background-color 0.3s, color 0.3s;
    }

    h1, h2, h3, h4 {
      font-weight: 600;
      color: var(--heading);
    }

    /* tema claro e escuro */
    :root {
      --bg: #f8f9fb;
      --text: #222;
      --heading: #111;
      --card-bg: #fff;
      --border: #ddd;
      --primary: #007bff;
      --primary-hover: #0056b3;
    }

    body.dark {
      --bg: #1e1e1e;
      --text: #ddd;
      --heading: #fff;
      --card-bg: #2a2a2a;
      --border: #444;
      --primary: #3391ff;
      --primary-hover: #5badff;
    }

    
    header, footer {
      background-color: var(--card-bg);
      border-bottom: 1px solid var(--border);
      text-align: center;
      padding: 1.5rem 1rem;
      position: relative;
      transition: background-color 0.3s, border-color 0.3s;
    }

    footer {
      border-top: 1px solid var(--border);
      margin-top: 3rem;
      padding: 1rem;
      color: var(--text);
      font-size: 0.9rem;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 1rem;
    }

    main {
      padding: 2rem 1rem;
      max-width: 900px;
      margin: 0 auto;
    }

    section {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      border: 1px solid var(--border);
      transition: background-color 0.3s, border-color 0.3s;
    }

    h2 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      border-left: 4px solid var(--primary);
      padding-left: 0.5rem;
    }

    h3 {
      font-size: 1.1rem;
      margin-bottom: 0.75rem;
    }

    /* botões */
    button, label[role="button"] {
      background-color: var(--primary);
      color: #fff;
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
      font-weight: 500;
      margin: 0.25rem;
    }

    button:hover, label[role="button"]:hover {
      background-color: var(--primary-hover);
    }

    button:disabled {
      background-color: #999;
      cursor: not-allowed;
    }

    /* switch modo escuro */
    .theme-toggle {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.3s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--primary);
    }

    input:checked + .slider:before {
      transform: translateX(24px);
    }

    /* upload */
    #drop-area {
      border: 2px dashed var(--primary);
      background: rgba(0,123,255,0.05);
      border-radius: 8px;
      padding: 1.5rem;
      text-align: center;
      margin-top: 1rem;
      transition: background 0.3s;
    }

    #file-list {
      margin-top: 1rem;
      list-style: none;
      color: var(--text);
    }

    #file-list li {
      background: var(--bg);
      padding: 0.5rem;
      margin-bottom: 0.3rem;
      border-radius: 5px;
      border: 1px solid var(--border);
    }

    /* gravação */
    #recorder-controls {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    #rec-status {
      margin-left: 0.5rem;
      font-weight: 500;
    }

    #waveform {
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 4px;
      margin-top: 1rem;
      background: var(--bg);
    }

    #record-settings {
      margin-top: 1rem;
    }

    select {
      padding: 0.4rem 0.6rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      margin-top: 0.3rem;
      margin-bottom: 0.8rem;
      display: block;
      width: 100%;
      max-width: 300px;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }

    /*transcrição */
    #results {
      margin-top: 1rem;
    }

    #result-actions {
      margin-bottom: 1rem;
    }

    #transcript {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 1rem;
      min-height: 150px;
      font-family: monospace;
      white-space: pre-wrap;
      overflow-y: auto;
      color: var(--text);
    }

    #transcript .placeholder {
      color: #888;
    }

    /* histórico */
    #history-list {
      list-style: none;
      padding-left: 0;
      margin-top: 1rem;
    }

    #history-list li {
      padding: 0.5rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 5px;
      margin-bottom: 0.4rem;
    }

    /* acessibilidade */
    .visually-hidden {
      position: absolute;
      left: -9999px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <header role="banner" class="header">
    <div class="container">
      <h1 id="site-title">Transcrição</h1>
      <p id="site-subtitle">Suba um áudio ou grave diretamente pelo navegador</p>
    </div>

    <!-- Botão switch -->
    <div class="theme-toggle">
      <label class="switch">
        <input type="checkbox" id="theme-switch" aria-label="Alternar modo escuro">
        <span class="slider"></span>
      </label>
    </div>
  </header>

  <main id="main" role="main">
    
    <section id="actions" aria-labelledby="actions-title">
      <h2 id="actions-title">Como você quer enviar o áudio?</h2>

      <article id="upload-section" aria-labelledby="upload-title">
        <h3 id="upload-title">Enviar arquivo</h3>

        <div id="drop-area" role="region" aria-label="Área de arrastar e soltar">
          <p id="drop-instructions">Arraste e solte arquivos de áudio aqui ou use o botão para selecionar.</p>

          <label for="file-input" id="file-label" role="button" tabindex="0">
            Selecionar arquivo
          </label>
          <input id="file-input" type="file" accept="audio/*" multiple style="display:none" />
          <ul id="file-list" aria-live="polite"></ul>
          <script>
            document.getElementById('file-label').addEventListener('click', () => {
            document.getElementById('file-input').click();
            });
          </script>
        </div>
      </article>

      <article id="record-section" aria-labelledby="record-title">
        <h3 id="record-title">Gravar pelo dispositivo</h3>
        <div id="recorder-controls" role="region" aria-label="Controles de gravação">
          <button id="record-start" aria-pressed="false">Iniciar gravação</button>
          <button id="record-pause" disabled>Pause</button>
          <button id="record-stop" disabled>Parar</button>
          <span id="rec-status" aria-live="polite">Pronto para gravar</span>
          <span id="rec-timer" aria-live="polite">00:00</span>
        </div>
        <canvas id="waveform" width="800" height="100"></canvas>
      </article>
    </section>

    <section id="transcription">
      <h2>Transcrição</h2>
      <label for="language">Idioma</label>
      <select id="language">
        <option value="pt-BR" selected>Português</option>
        <option value="en-US">Inglês</option>
      </select>
      <button id="submit-transcription" disabled>Solicitar transcrição</button>

      <div id="results">
        <h3>Resultado</h3>
        <article id="transcript">
          <p class="placeholder">Nenhuma transcrição ainda.</p>
        </article>
      </div>
    </section>
  </main>

  <footer role="contentinfo">
    <div class="container">
      <small id="legal">© <span id="year"></span> Transcrição — Todos os direitos reservados</small>
    </div>
  </footer>

  <script>
    // Atualiza o ano
    document.getElementById('year').textContent = new Date().getFullYear();

    // Dark mode switch
    const themeSwitch = document.getElementById('theme-switch');
    const userPref = localStorage.getItem('theme');
    if (userPref === 'dark') {
      document.body.classList.add('dark');
      themeSwitch.checked = true;
    }

    themeSwitch.addEventListener('change', () => {
      if (themeSwitch.checked) {
        document.body.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.classList.remove('dark');
        localStorage.setItem('theme', 'light');
      }
    });
  </script>
</body>
</html>
